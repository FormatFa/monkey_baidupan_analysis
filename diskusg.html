<!DOCTYPE html>
<html lang="en">

<!-- 用于显示使用了多少 -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="echarts.min.js"></script>
    <style type="text/css">
        .chart {
            position: fixed;
            right: 0px;
        }
    </style>
</head>

<body>

    <!--  图本地测试 -->
    <div style="position: fixed;right: 0px;top: 0px; width: 400px;height: 400px;">
        <!-- echart style的position会变，这里在外面用一个div围住他，fixed这些显示在外面 -->
        <div class="chart" style=" width: 400px;height: 400px;" id="disk"></div>
    </div>


    <script>

        // 字节转换为文件大小
        function getSize(value) {
            let size = "unknow"
            if (value < 1024) {
                size = value + "b"
            }
            else if (value < 1024 * 1024) {
                size = Math.round(value / 1024) + "k"
            }
            else if (value < 1024 * 1024 * 1024) {
                size = Math.round(value / 1024 / 1024) + 'm'
            }
            else if (value < 1024 * 1024 * 1024 * 1024) {
                size = Math.round(value / 1024 / 1024 / 1024) + 'g    '
            }
            return size;
        }
        var chart = echarts.init(document.getElementById("disk"))
        chart.setOption({
            title: { text: "测试" },
            toolbox: {
                show: true,
                bottom: 0,
                feature: {

                    myTool1: {
                        show: true,
                        icon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',
                        title: "下载文件列表",
                        onclick: function () {
                            alert("下载数据测试")
                        }
                    },
                    myTool2: {
                        show: true,
                        icon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',
                        title: "关闭图表",
                        onclick: function () {
                            alert("关闭图表")
                        }
                    }


                }
            },
            tooltip: {
                // 设置显示的提示，将字节显示为m,g这些
                formatter: function (params) {
                    let value = params.value
                    let size = getSize(value);
                    return params.name + ":" + size
                }
            },
            series: [

                {
                    name: "disk usage",
                    type: "treemap",
                    //设置显示的深度，1表示只显示一级
                    leafDepth: 1,

                    // 测试数据
                    data: [
                        {
                            "name": "Windows 10 专业版 v1803 64位 2018.7（纯净版）",
                            "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）",
                            "children": [
                                {
                                    "name": "系统简介+截图",
                                    "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/系统简介+截图",
                                    "children": [
                                        {
                                            "name": "02.png",
                                            "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/系统简介+截图/02.png",
                                            "value": 264886
                                        },
                                        {
                                            "name": "01.png",
                                            "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/系统简介+截图/01.png",
                                            "value": 137502
                                        },
                                        {
                                            "name": "04.png",
                                            "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/系统简介+截图/04.png",
                                            "value": 96595
                                        },
                                        {
                                            "name": "03.png",
                                            "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/系统简介+截图/03.png",
                                            "value": 263857
                                        },
                                        {
                                            "name": "系统简介.txt",
                                            "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/系统简介+截图/系统简介.txt",
                                            "value": 1755
                                        }
                                    ],
                                    "value": 764595
                                },
                                {
                                    "name": "文件校验工具.exe",
                                    "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/文件校验工具.exe",
                                    "value": 1211934
                                },
                                {
                                    "name": "文件校验信息（必须校对！）.txt",
                                    "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/文件校验信息（必须校对！）.txt",
                                    "value": 534
                                },
                                {
                                    "name": "【软件】Microsoft Office 下载地址.url",
                                    "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/【软件】Microsoft Office 下载地址.url",
                                    "value": 124
                                },
                                {
                                    "name": "【首发地址】（www.cyxitong.com）.url",
                                    "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/【首发地址】（www.cyxitong.com）.url",
                                    "value": 125
                                },
                                {
                                    "name": "CN_Windows_10_Professional_Version_1803_x64_2018.7.WIM",
                                    "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/CN_Windows_10_Professional_Version_1803_x64_2018.7.WIM",
                                    "value": 6440728049
                                },
                                {
                                    "name": "安装工具&教程（会安装的就不用看了）.url",
                                    "path": "windows镜像/Windows 10 专业版 v1803 64位 2018.7（纯净版）/安装工具&教程（会安装的就不用看了）.url",
                                    "value": 134
                                }
                            ],
                            "value": 6442705495
                        },
                        {
                            "name": "5个混合镜像包",
                            "path": "windows镜像/5个混合镜像包",
                            "children": [
                                {
                                    "name": "注意事项，没下的你就后悔了。.txt",
                                    "path": "windows镜像/5个混合镜像包/注意事项，没下的你就后悔了。.txt",
                                    "value": 124
                                },
                                {
                                    "name": "bochs 5款经典镜像.rar",
                                    "path": "windows镜像/5个混合镜像包/bochs 5款经典镜像.rar",
                                    "value": 881073806
                                }
                            ],
                            "value": 881073930
                        },
                        {
                            "name": "98可上网集成红警.zip",
                            "path": "windows镜像/98可上网集成红警.zip",
                            "value": 206999805
                        },
                        {
                            "name": "贝贝XP with Internet.7z",
                            "path": "windows镜像/贝贝XP with Internet.7z",
                            "value": 96947948
                        },
                        {
                            "name": "带q有网络声音的xp镜像.img",
                            "path": "windows镜像/带q有网络声音的xp镜像.img",
                            "value": 888954880
                        },
                        {
                            "name": "win7.zip",
                            "path": "windows镜像/win7.zip",
                            "value": 410138450
                        },
                        {
                            "name": "网，声xp.img",
                            "path": "windows镜像/网，声xp.img",
                            "value": 876412928
                        }
                    ]
                }

            ]
        })
        chart.getDom().style.position = "fixed"
        console.log(chart.getOption())

    </script>x`x`
</body>

</html>